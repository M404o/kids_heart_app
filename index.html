<!DOCTYPE html>
<html lang="ja">
  <head>
    <!-- index.htmlå†… -->
    <link rel="stylesheet" href="style.css" />

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ãã‚‚ã¡ã‚«ãƒ¼ãƒ‰</title>
    <style>
      :root {
        font-size: 20px;
      }
      body {
        margin: 0;
        padding: 1.2rem;
        font-family: "Hiragino Maru Gothic ProN", sans-serif;
        background: #fff7ec;
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 100vh;
      }
      h1 {
        margin: 0 0 1rem;
        font-size: 1.8rem;
        font-weight: 700;
        color: #333;
      }
      /* å…¥åŠ›æ¬„ */
      textarea {
        width: 100%;
        max-width: 520px;
        height: 110px;
        border: 3px solid #aaa;
        border-radius: 20px;
        font-size: 1.1rem;
        padding: 0.6rem;
        resize: none;
        margin-bottom: 1rem;
        background: #ffffff;
      }
      /* ã‹ãªã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ */
      .kana-grid {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 0.6rem;
        width: 100%;
        max-width: 520px;
        margin-bottom: 1.4rem;
      }
      .kana-btn {
        font-size: 1.4rem;
        font-weight: 600;
        padding: 0.6rem 0;
        cursor: pointer;
        border: none;
        background: #ffffff;
        border: 2px solid #ccc;
        border-radius: 12px;
        transition: 0.12s;
      }
      .kana-btn:active {
        background: #eee;
      }

      /* æ„Ÿæƒ…ãƒœã‚¿ãƒ³ */

      .emoji-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr); /* æ¨ª4å€‹ä¸¦ã³ */
        gap: 0.3rem; /* é–“éš”ã›ã¾ã‚ */
        max-width: 300px; /* å…¨ä½“å¹…ã›ã¾ã‚ */
        margin: 1rem auto;
      }

      .emoji-btn.selected {
        border-color: #5bbe7d;
        box-shadow: 0 0 8px #5bbe7d80;
      }

      /* ãƒ•ãƒƒã‚¿ãƒ¼ãƒœã‚¿ãƒ³ */
      .footer {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        display: flex;
        justify-content: center;
        gap: 2rem;
        padding: 0.8rem 0;
        background: #fff;
        box-shadow: 0 -3px 6px #0002;
      }
      .footer button {
        font-size: 1.1rem;
        font-weight: 700;
        border: none;
        color: #fff;
        background: #5bbe7d;
        padding: 0.8rem 2.4rem;
        border-radius: 14px;
        cursor: pointer;
      }
      .footer button:active {
        filter: brightness(0.85);
      }
      /* ãƒ­ã‚°è¡¨ç¤º */
      #logBox {
        width: 100%;
        max-width: 520px;
        margin-bottom: 120px;
        display: none;
      }
      #logBox h2 {
        font-size: 1.2rem;
        margin: 0.6rem 0 0.3rem;
        font-weight: 700;
      }
      #logList {
        padding-left: 1rem;
        margin: 0;
        font-size: 1rem;
        line-height: 1.4;
      }
      /* 15æ–‡å­—ã‚’ 5Ã—3 ã§å‡ç­‰é…ç½® */
      .kana-grid {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 8px;
        font-size: 2rem;
        text-align: center;
      }
      .kana-grid > * {
        padding: 12px 0;
        border: 1px solid #ccc;
        border-radius: 6px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <h1>ãã‚‚ã¡ã‚¢ãƒ—ãƒª</h1>
    <!-- ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ï¼ˆä»»æ„ï¼‰ -->
    <textarea id="txt" placeholder="ã‚ã„ã†ãˆãŠã‚¿ãƒƒãƒ—ã§ ã“ã¨ã° ãŒ ã¤ãã‚Œã‚‹ã‚ˆ">
    </textarea>
  <script>
    document.getElementById("sendBtn").addEventListener("click", () => {
      const userInput = document.getElementById("txt").value;
      console.log("é€ä¿¡ã•ã‚ŒãŸå†…å®¹:", userInput);
    });
  </script>
    <!-- æ„Ÿæƒ…ãƒœã‚¿ãƒ³ -->
    <section class="emoji-grid" id="grid">
      <button class="emoji-btn">ğŸ˜€</button>
      <button class="emoji-btn">ğŸ˜¢</button>
      <button class="emoji-btn">ğŸ˜ </button>
      <button class="emoji-btn">âŒ</button>
    </section>
    <!-- â–¼å·¦å³ãƒ»é€ä¿¡ãƒœã‚¿ãƒ³ -->
    <div class="kana-nav">
      <button id="prevPage">â—€ï¸</button>
      <button id="sendBtn">ãŠãã‚‹</button>
      <button id="nextPage">â–¶ï¸</button>
    </div>
    <!-- â–¼ã‹ãª5æ–‡å­—Ã—3è¡Œã‚’å…¥ã‚Œã‚‹å™¨ -->
    <section id="kana-grid" class="kana-grid"></section>

    <script>
      /* --- ã‹ãªãƒšãƒ¼ã‚¸å®šç¾©ï¼ˆ5Ã—3ï¼15æ–‡å­—ã‚’1ãƒšãƒ¼ã‚¸ï¼‰ --- */
      const kanaPages = [
        [
          "ã‚",
          "ã„",
          "ã†",
          "ãˆ",
          "ãŠ",
          "ã‹",
          "ã",
          "ã",
          "ã‘",
          "ã“",
          "ã•",
          "ã—",
          "ã™",
          "ã›",
          "ã",
        ],
        [
          "ãŸ",
          "ã¡",
          "ã¤",
          "ã¦",
          "ã¨",
          "ãª",
          "ã«",
          "ã¬",
          "ã­",
          "ã®",
          "ã¯",
          "ã²",
          "ãµ",
          "ã¸",
          "ã»",
        ],
        [
          "ã¾",
          "ã¿",
          "ã‚€",
          "ã‚",
          "ã‚‚",
          "ã‚„",
          "ã‚†",
          "ã‚ˆ",
          "ã‚‰",
          "ã‚Š",
          "ã‚‹",
          "ã‚Œ",
          "ã‚",
          "ã‚",
          "ã‚“",
        ],
      ];

      let current = 0; // ä»Šã®ãƒšãƒ¼ã‚¸ç•ªå· (0ã‚¹ã‚¿ãƒ¼ãƒˆ)

      /* ãƒšãƒ¼ã‚¸ã®5Ã—3ãƒœã‚¿ãƒ³ã‚’æç”»ã™ã‚‹é–¢æ•° */
      function renderKana() {
        const grid = document.getElementById("kana-grid");
        grid.innerHTML = ""; // ä¸€æ—¦ã‚¯ãƒªã‚¢

        kanaPages[current].forEach((k) => {
          const btn = document.createElement("button");
          btn.textContent = k;
          btn.className = "kana-btn";
          grid.appendChild(btn);
        });

        /* â—€ï¸â–¶ï¸ ãƒœã‚¿ãƒ³ã®æœ‰åŠ¹ï¼ç„¡åŠ¹ */
        prevPage.disabled = current === 0;
        nextPage.disabled = current === kanaPages.length - 1;
      }

      /* ---------------- ãƒŠãƒ“ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆ ---------------- */
      prevPage.addEventListener("click", () => {
        current--;
        renderKana();
      });
      nextPage.addEventListener("click", () => {
        current++;
        renderKana();
      });

      /* --- é€ä¿¡ãƒœã‚¿ãƒ³ï¼ˆãƒãƒƒãƒ•ã‚¡ã‚’ GPT ã«é€ã‚‹ä¾‹ã€‚ä»Šã¯ãƒ€ãƒŸãƒ¼ï¼‰ --- */
      let buffer = "";
      document.getElementById("kana-grid").addEventListener("click", (e) => {
        if (e.target.classList.contains("kana-btn"))
          buffer += e.target.textContent;
      });
      sendBtn.addEventListener("click", () => {
        if (!buffer) return;
        console.log("é€ä¿¡å†…å®¹:", buffer); // â˜…ã“ã“ã‚’ fetch(API) ã«ã™ã‚Œã°OK
        buffer = "";
      });

      /* åˆæœŸåŒ–ï¼šæœ€åˆã®ãƒšãƒ¼ã‚¸ã‚’æç”» */
      renderKana();
    </script>

    <!-- ãƒ­ã‚°è¡¨ç¤º -->
    <section id="logBox">
      <h2>ğŸ“‹ ãã‚‡ã†ã®ã‚ã—ã‚ã¨</h2>
      <ul id="logList"></ul>
    </section>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ãƒœã‚¿ãƒ³ -->
    <div class="footer">
      <button id="parentBtn">è¦ªãŒã¿ã‚‹</button>
      <button id="endBtn">ãŠã‚ã‚‹</button>
    </div>

    <script>
      const counts = {};
      const logList = document.getElementById("logList");
      const logBox = document.getElementById("logBox");
      const txtArea = document.getElementById("txt");

      // ã‹ãªãƒœã‚¿ãƒ³ â†’ æ–‡å­—ã‚’è¿½åŠ 
      document.querySelectorAll(".kana-btn").forEach((btn) => {
        btn.addEventListener("click", () => {
          txtArea.value += btn.textContent;
        });
      });

      // é¡”ãƒœã‚¿ãƒ³æŠ¼ä¸‹ â†’ é¸æŠçŠ¶æ…‹&ã‚«ã‚¦ãƒ³ãƒˆ
      document.querySelectorAll(".emoji-btn").forEach((btn) => {
        btn.addEventListener("click", () => {
          btn.classList.toggle("selected");
          const emo = btn.textContent;
          counts[emo] = (counts[emo] || 0) + 1;
        });
      });

      // è¦ªãŒã¿ã‚‹
      document.getElementById("parentBtn").addEventListener("click", () => {
        logList.innerHTML = "";
        Object.entries(counts).forEach(([emo, c]) => {
          const li = document.createElement("li");
          li.textContent = `${emo} Ã— ${c}`;
          logList.appendChild(li);
        });
        const txt = txtArea.value.trim();
        if (txt) {
          const li = document.createElement("li");
          li.textContent = `ã“ã¨ã°: ${txt}`;
          logList.appendChild(li);
        }
        logBox.style.display = "block";
      });

      // ãŠã‚ã‚‹ï¼ˆãƒšãƒ¼ã‚¸ãƒªãƒ­ãƒ¼ãƒ‰ï¼‰
      document
        .getElementById("endBtn")
        .addEventListener("click", () => location.reload());
    </script>
  </body>
</html>
